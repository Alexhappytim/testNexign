# Тестовое задание
В этом репозитории находится тестовое задание для буткемпа NEXIGN
# Запуск
    1. Скачать jar архив из репозитория
    2. Запустить из консоли с помощью команды java -jar testNexign.jar
    3. Эндпоинт к задаче 2 доступна по адресу http://localhost:8080/api/udr/{номер телефона}?month={номер месяца}(опционально) Принимает GET запросы
    4. Эндпоинт к задаче 3 доступна по адресу http://localhost:8080/api/cdr/{номер телефона}?startDate={время начала в формате ГГГГ-ММ-ДДTЧЧ:ММ:ССZ}&endDate={время конца} Принимает POST запросы
    5. Отчеты из 3 задания создаются в директории /reports оторая находится в однойдиректории с .jar

# Описание задания
Все звонки, совершенные абонентом сотового оператора, собираются на коммутаторах и фиксируются в CDR формате. Когда абонент находится в роуминге за процесс сбора его данных отвечает обслуживающая сеть абонента. Для стандартизации данных между разными операторами, международная ассоциация GSMA ввела стандарт BCE. Согласно ему, данные с CDR должны агрегировать в единый отчет UDR, который впоследствии передается оператору, обслуживающему абонента в домашней сети. На основе этого отчета, домашний оператор выставляет абоненту счет.
Цель задания – смоделировать описанный процесс в упрощенном виде.
Целевой микросервис будет генерировать CDR записи, сохранять их в базу данных и предоставлять Rest-API для получения UDR отчетов и генерации сводного отчета с CDR записями по абоненту.

### Задача 1
Напишите часть, эмулирующую работу коммутатора, т.е. генерирующую CDR записи.
1.     Во время генерации создаются CDR записи и сохраняются в локальную БД (h2);
2.     Данные генерируются в хронологическом порядке звонков, т.е. записи по одному абоненту могут прерываться записями по другому абоненту;
3.     Количество и длительность звонков определяется случайным образом;
4.     Установленный список абонентов (не менее 10) хранится в локальной БД (h2);
5.     Один прогон генерации создает записи сразу за 1 год.

### Задача 2
Напишите часть, предоставляющую Rest-API для работы с UDR.
1.     Требуется REST метод, который возвращает UDR запись (формат предоставлен выше) по одному переданному абоненту. В зависимости от переданных в метод параметров, UDR должен составляться либо за запрошенный месяц, либо за весь тарифицируемый период.
2.     Требуется REST метод, который возвращает UDR записи по всем нашим абонентам за запрошенный месяц.
3.     Данные можно брать только из БД.

### Задача 3
Напишите часть, формирующую и сохраняющую CDR-отчет.
1.     Напишите, REST метод, который инициирует генерацию CDR-отчета и возвращает успешный ответ (или текст ошибки) + уникальный UUID запроса, когда файл будет готов.
2.     CDR файл должен генерироваться для запрошенного абонента за переданный период времени. Переданный период может не совпадать с календарными месяцами. Например, можно запросить отчет по звонкам за две недели или за полгода.
3.     Данные можно брать только из БД.
4.     Сгенерированный файл может быть в формате csv или txt и располагаться в рабочей папке сервиса, в директории /reports.
5.     Название файла должно содержать номер пользователя и уникальный UUID запроса. Например – «79991112233_ 61f0c404-5cb3-11e7-907b-a6006ad3dba0.csv»
